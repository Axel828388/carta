:root{
  --bg-1: #2b0032; /* deep purple */
  --bg-2: #4b1b5a; /* mid purple */
  --accent: #b97bdc; /* soft lilac */
  --accent-2: #9b5bd6;
  --paper: #fffafc;
  --muted: rgba(255,255,255,0.82);
  --heading-font: 'Playfair Display', serif;
  --body-font: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:var(--body-font);
  color: #2b0032;
  background: linear-gradient(135deg,var(--bg-1) 0%, var(--bg-2) 60%);
  min-height:100vh;
  -webkit-font-smoothing:antialiased;
  overflow-x:hidden;
}

.heart-bg{
  position:fixed; inset:0; pointer-events:none; z-index:0; opacity:0.15;
  background: radial-gradient(circle at 10% 20%, rgba(185,123,220,0.12), transparent 10%),
              radial-gradient(circle at 90% 80%, rgba(155,91,214,0.10), transparent 12%);
}

.container{position:relative; z-index:1; max-width:1000px; margin:0 auto; padding:28px}

/* Open indicator */
.envelope-wrap{position:relative}
.open-indicator{position:absolute; left:50%; transform:translateX(-50%); top:-26px; background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:white; padding:8px 12px; border-radius:999px; box-shadow:0 8px 24px rgba(0,0,0,0.25); font-weight:600; z-index:5; cursor:pointer; animation:indicatorPulse 1.8s infinite ease-in-out}
.open-indicator.hidden{display:none}

@keyframes indicatorPulse{0%{transform:translateX(-50%) translateY(0) scale(1)}45%{transform:translateX(-50%) translateY(-6px) scale(1.03)}100%{transform:translateX(-50%) translateY(0) scale(1)}}

/* Envelope */
.envelope{width:320px; height:200px; margin:48px auto; position:relative; cursor:pointer; transition:transform .35s ease;}
.envelope:hover{transform:translateY(-6px)}
.envelope .top{height:110px; background:linear-gradient(180deg,var(--accent) 0%, var(--accent-2) 100%); clip-path:polygon(0 0,100% 0,50% 72%); border-radius:8px}
.envelope .bottom{position:absolute; bottom:0; width:100%; height:110px; background:linear-gradient(180deg,#8e44ad,#6f2b7b); border-radius:8px}
.paper{position:absolute; top:42px; left:6%; width:88%; height:116px; background:var(--paper); border-radius:8px; display:flex; align-items:center; justify-content:center; padding-top:8px; font-size:18px; color:#6a1b61}

/* Letter */
.letter{background:linear-gradient(180deg, rgba(255,250,252,0.9), rgba(255,255,255,0.98)); padding:28px; border-radius:16px; box-shadow:0 12px 40px rgba(0,0,0,0.35); margin-top:24px; max-width:820px; margin-left:auto; margin-right:auto; animation:fadeIn .6s ease; position:relative}
.hidden{display:none}
.close-btn{position:absolute; right:14px; top:14px; background:transparent; border:none; font-size:20px; color:var(--bg-1); cursor:pointer}

/* Letter close animation */
.letter.closing{animation:letterClose .56s cubic-bezier(.22,1,.36,1) forwards}
@keyframes letterClose{0%{opacity:1; transform:translateY(0) scale(1)}60%{transform:translateY(10px) scale(.995)}100%{opacity:0; transform:translateY(40px) scale(.96)}}

/* Envelope reveal animation when letter closes */
.envelope.revealed{animation:envelopePop .5s cubic-bezier(.22,1,.36,1) forwards}
@keyframes envelopePop{0%{transform:translateY(6px) scale(.98); opacity:0}60%{transform:translateY(-6px) scale(1.03); opacity:1}100%{transform:none; opacity:1}}

.letter h1{margin:0 0 12px 0; font-size:28px; color:#3d013f; font-family:var(--heading-font); font-weight:700}
.section{margin:18px 0; text-align:left}
.section h2{color:var(--accent); margin:0 0 8px 0; font-family:var(--heading-font)}
.small-muted{color:var(--muted); font-size:13px}

/* Styling for the quoted text inside the letter so it's readable on the light paper */
.letter blockquote.song-quote{
  color:#4a2747; /* darker purple for readability */
  background: rgba(155,91,214,0.06);
  border-left: 4px solid var(--accent);
  padding:12px 14px;
  border-radius:8px;
  margin:12px 0;
  font-style:italic;
}

/* Signature style */
.signature{margin-top:14px; font-family:var(--heading-font); color:var(--bg-1); font-size:16px}

/* Popup for heart messages */
.popup-overlay{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:120; pointer-events:auto; background:rgba(11,4,15,0.36); animation:overlayFade .22s ease both}
.popup-card{pointer-events:auto; background:var(--paper); padding:18px 20px; border-radius:12px; box-shadow:0 18px 60px rgba(0,0,0,0.45); min-width:220px; max-width:88%; text-align:center; opacity:0; transform:translateY(12px) scale(.98); animation:popIn .26s cubic-bezier(.2,.9,.3,1) both}
.popup-card p{margin:0; font-size:16px; color:#3d013f}
.popup-close{position:absolute; right:12px; top:8px; background:transparent; border:none; font-size:18px; cursor:pointer}

@keyframes overlayFade{from{opacity:0} to{opacity:1}}
@keyframes popIn{0%{opacity:0; transform:translateY(12px) scale(.98)} 60%{opacity:1; transform:translateY(-6px) scale(1.02)} 100%{opacity:1; transform:none; scale:1}}

/* Confetti particles */
.confetti-container{position:absolute; inset:0; pointer-events:none; overflow:visible}
.confetti{position:absolute; width:10px; height:16px; opacity:0.95; transform-origin:center; border-radius:2px}

@keyframes confettiFall {
  0% { transform: translateY(-10px) rotate(0deg); opacity:1 }
  100% { transform: translateY(220px) rotate(520deg); opacity:0 }
}

@keyframes confettiFloat {
  0% { transform: translateY(0) rotate(0deg) }
  50% { transform: translateY(40px) rotate(180deg) }
  100% { transform: translateY(0) rotate(360deg) }
}


/* Hearts activity */
.hearts{font-size:40px; display:flex; gap:18px; margin-top:10px}
.heart{cursor:pointer; transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease; padding:6px; border-radius:10px; display:inline-flex; align-items:center; justify-content:center; border:2px solid transparent}
.heart:active,.heart:hover{transform:scale(1.22)}
.heart:focus{outline:none; box-shadow:0 0 0 4px rgba(155,91,214,0.12)}
.heart.popped{transform:scale(1.32); box-shadow:0 10px 30px rgba(155,91,214,0.18); border-color:rgba(185,123,220,0.9); background:linear-gradient(135deg, rgba(185,123,220,0.06), rgba(155,91,214,0.04))}

/* When popup is open, hide the short underlying reveal message for clarity */
body.popup-open #msg{visibility:hidden; opacity:0; transition:opacity .12s ease}

/* Video section removed */

/* Responsive */
@media (max-width:720px){
  .envelope{width:260px;height:160px}
  .paper{height:96px;font-size:16px}
  .video-thumb{width:100%}
  .letter{padding:18px}
  .container{padding:18px}
}

/* Login modal styles */
.login-modal{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:linear-gradient(180deg, rgba(11,4,15,0.55), rgba(11,4,15,0.75)); z-index:60}
.login-card{width:min(420px,94%); background:var(--paper); padding:22px 20px; border-radius:12px; box-shadow:0 12px 40px rgba(0,0,0,0.6); text-align:center}
.login-card h2{margin:0 0 6px; font-family:var(--heading-font); color:var(--bg-1)}
.login-sub{margin:0 0 10px; color:#4a2747}
.login-hint{margin:0 0 12px; color:#7a4a80; font-size:14px}
.login-card input[type="text"]{width:100%; padding:10px 12px; border-radius:8px; border:1px solid rgba(0,0,0,0.08); font-size:15px; margin-bottom:12px}
.login-actions{display:flex; gap:10px; justify-content:center}
.login-actions .primary{background:linear-gradient(135deg,var(--accent),var(--accent-2)); border:none; color:white; padding:10px 14px; border-radius:8px; cursor:pointer}
.hint-btn{background:transparent; border:none; color:var(--bg-2); padding:10px 12px; cursor:pointer}
.login-msg{margin-top:10px; color:#4a2747; min-height:20px}

/* reveal message animation */
.reveal-msg{margin-top:12px; font-weight:600; color:#4a1a4d; min-height:26px}

/* Vinyl player styles */
.vinyl-section{margin:18px auto 6px; text-align:center; max-width:720px}
.vinyl-note{color:var(--muted); margin-bottom:10px}
.vinyl{display:inline-block; position:relative; cursor:pointer}
.record{width:220px; height:220px; border-radius:50%; background:radial-gradient(circle at 30% 30%, #111 0 4%, #222 4% 8%, #111 8% 12%, #070707 12% 100%); display:flex; align-items:center; justify-content:center; box-shadow:0 10px 30px rgba(0,0,0,0.5); transition:transform .3s ease}
.record .grooves{position:absolute; inset:0; border-radius:50%; background-image: radial-gradient(rgba(255,255,255,0.02) 1px, transparent 1px); background-size:6px 6px; opacity:0.15}
.record .label{width:82px; height:82px; border-radius:50%; background:linear-gradient(180deg,var(--accent-2),var(--accent)); color:white; display:flex; align-items:center; justify-content:center; font-weight:600; box-shadow:inset 0 -4px 10px rgba(0,0,0,0.15); font-size:28px}
.needle{position:absolute; width:14px; height:110px; right:48px; top:-6px; background:linear-gradient(180deg,#cfc1d8,#a88abf); border-radius:6px 6px 2px 2px; transform-origin:14px 20px; transform:rotate(-28deg); box-shadow:0 6px 18px rgba(0,0,0,0.35); transition:transform 420ms cubic-bezier(.22,1,.36,1)}

/* keep the spin animation present but paused by default for a smoother start/stop */
.record{animation:spin 3s linear infinite; animation-play-state:paused; transition:transform 420ms ease-in-out, box-shadow 420ms ease-in-out}
.record.playing{animation-play-state:running; transform:scale(1.02); box-shadow:0 16px 40px rgba(0,0,0,0.6)}
.needle.playing{transform:rotate(-6deg)}

.vinyl-actions{margin-top:10px; display:flex; gap:10px; justify-content:center; align-items:center}
.small{background:transparent; border:1px solid rgba(255,255,255,0.08); padding:8px 10px; border-radius:8px; color:var(--paper); cursor:pointer}
.small.link{color:var(--paper); text-decoration:underline}

@keyframes spin{from{transform:rotate(0)} to{transform:rotate(360deg)}}

@media (max-width:520px){
  .record{width:160px; height:160px}
  .needle{height:86px; right:36px; top:-4px}
}

@keyframes fadeIn{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none}}
